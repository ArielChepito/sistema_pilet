<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core" 
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" 
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    
    <ui:composition template="../WEB-INF/resources/fragmentos/comun.xhtml">
        <!-- Título de la página -->
        <ui:param name="pageTitl" value="::: Página Solicitud Beca :::"/>
        <ui:param name="pageNomb" value="Página Solicitud Beca"/>
        <ui:param name="pageDesc" value="Mantenimiento de Solicitud Beca"/> 
        <!-- Activar el link del menú -->
        <ui:param name="actiMenu1" value=""/>
        <ui:param name="actiAlumnos" value="active"/>
        <!-- Scripts personalizados -->
        <ui:define name="CustomScripts">
        <!--Plugins Selector de Fecha-->
        <h:outputStylesheet library="css" name="datepicker3.css"/>
        <h:outputScript library="js" name="bootstrap-datepicker.js"/>
        <h:outputScript library="js" name="bootstrap-datepicker.es.js"/>
        <!--Plugins Select-->
        <h:outputStylesheet library="css" name="bootstrap-select.css"/>
        <h:outputScript library="js" name="bootstrap-select.js"/>
        <!--Plugins custom-->
        <h:outputScript library="js" name="custom/becas.js"/>
        <ui:define name="CustomScripts">
        <!--Plugins custom-->
        <h:outputScript library="js" name="custom/slid.js"/>
        </ui:define>
        </ui:define>
        <!-- Elementos propios del boby -->
        <ui:define name="body">
        <style>
            .field-error
            {
                color: #a94442; 
                display: inline;
                font-size: 10px;
            }
            .field-error:first-letter
            {
                text-transform: capitalize;
                color: #003399;
            }
            .form-group
            {
                margin-bottom: 5px !important;
            }
            .bootstrap-select > .btn {
                padding-top: 2px;
                padding-bottom: 2px;
            }
            .simple {
                border-left: 6px solid grey;
                background-color: white;
            }  
            .btonTabl
            {
                
                padding-left: 2cm;
            }


/*Business Card Css */
.business-card {
  border: 1px solid #cccccc;
  background: #f8f8f8;
  padding: 10px;
  border-radius: 4px;
  margin-bottom: 10px;
}
.profile-img {
  height: 350px;
  background: white;
}
.job {
  color: #666666;
  font-size: 17px;
}
.mail {
  font-size: 16px;
 }
 
 /*otro ejemplo xD*/
 .panel.panel--styled {
    background: #F4F2F3;
}
.panelTop {
    padding: 30px;
}

.panelBottom {
    border-top: 1px solid #e7e7e7;
    padding-top: 20px;
}
.btn-add-to-cart {
    background: #FD5A5B;
    color: #fff;
}
.btn.btn-add-to-cart.focus, .btn.btn-add-to-cart:focus, .btn.btn-add-to-cart:hover  {
	color: #fff;   
    background: #FD7172;
	outline: none;
}
.btn-add-to-cart:active {
	background: #F9494B;
	outline: none;
}


span.itemPrice {
    font-size: 24px;
    color: #FA5B58;
}

        </style>
            <div class="row">
                <h:panelGroup id="container">
                    <ui:fragment id="FragTabl" rendered="#{becasBean.guardar}">
                        <fieldset>
                            <div class="col-md-12 col-xs-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Tabla de Datos</div>
                                    <div class="panel-body">
                                        <h:panelGroup id="ContRegi">
                                            <div id="toolTablRegi">
                                                <h:form>
                                                    <!--Form exclusivo para los remotos-->
                                                      <p:remoteCommand name="consObje" actionListener="#{becasBean.cons()}" oncomplete="INIT_OBJE();" update="@form :container"
                                                                global="true"/>
                                                    
                                                    <div class="btn-group">
                                                        <h:commandLink id="btonTabl" class="btn btn-success">
                                                            <p:ajax listener="#{becasBean.toogCarn()}" process="@form" update="@form :container" oncomplete="INIT_OBJE();" />
                                                            <i class="fa fa-plus"/> Agregar una nueva solicitud de beca
                                                        </h:commandLink>
                                                    </div>
                                                </h:form>
                                            </div>
                                            <h:dataTable pt:data-id="TablRegi" id="TablRegi" value="#{becasBean.listBeca}"
                                                         var="fila" class="boottable" pt:data-toolbar="#toolTablRegi"
                                                         styleClass="table-hover table-bordered table-condensed table-striped table-responsive"
                                                         pt:data-show-refresh="false" pt:data-show-toggle="false" pt:data-show-columns="false" 
                                                         pt:data-search="true" pt:data-pagination="true" pt:data-page-list="[5, 10, 20, 50]"
                                                         pt:data-click-to-select="true"  pt:data-select-item-name="radio"
                                                         pt:data-single-select="true">                                
                                                <h:column pt:data-field="state" pt:data-checkbox="true">
                                                </h:column>
                                                <h:column pt:data-align="right" pt:data-sortable="true" pt:data-field="id">
                                                    <f:facet name="header">Código</f:facet>
                                                    <h:outputText value="#{fila.codiSoliBeca.codiSoliBeca}"/>
                                                </h:column>
                                                <h:column pt:data-sortable="true">
                                                    <f:facet name="header">Empresa</f:facet> 
                                                    <h:panelGroup class="label label-info" rendered="#{fila.codiSoliBeca.codiEmpr.nombEmpr eq null}">
                                                   <i class="fa fa-lock"/> Sin Empresa</h:panelGroup>
                                                    <h:panelGroup class="label label-default" rendered="#{fila.codiSoliBeca.codiEmpr.nombEmpr ne null}">
                                                  <h:outputText value="#{fila.codiSoliBeca.codiEmpr.nombEmpr}"/></h:panelGroup>
                                                </h:column>
                                                <h:column pt:data-sortable="true">
                                                    <f:facet name="header">Alumno</f:facet>
                                                    <h:outputText value="#{fila.codiSoliBeca.nombAlum}"/>
                                                </h:column>
                                                <h:column pt:data-sortable="true">
                                                    <f:facet name="header">Grado Alumno</f:facet>
                                                    <h:outputText value="#{fila.codiSoliBeca.codiGrad.nombGrad}"/>
                                                </h:column>
                                                <h:column pt:data-sortable="true">
                                                    <f:facet name="header">Fecha Solicitud</f:facet>
                                                    <h:outputText value="#{fila.codiSoliBeca.fechSoliBeca}">
                                                       <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-6"/>
                                                    </h:outputText>
                                                </h:column>
                                                <h:column pt:data-sortable="true">
                                                    <f:facet name="header">Estado beca</f:facet> 
                                                    <h:panelGroup class="label label-success" rendered="#{fila.codiTipoEsta.codiTipoEsta eq 1}">
                                                        <i class="fa fa-unlock"/> Activo</h:panelGroup>
                                                    <h:panelGroup class="label label-info" rendered="#{fila.codiTipoEsta.codiTipoEsta eq 3}">
                                                        <i class="fa fa-unlock"/> Historial</h:panelGroup>
                                                    <h:panelGroup class="label label-danger" rendered="#{fila.codiTipoEsta.codiTipoEsta eq 2}">
                                                        <i class="fa fa-unlock"/> Inactivo</h:panelGroup>
                                                    <h:panelGroup class="label label-warning" rendered="#{fila.codiTipoEsta.codiTipoEsta eq 4}">
                                                        <i/> Evaluando</h:panelGroup>
                                                </h:column>
                                            </h:dataTable>
                                        </h:panelGroup>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </ui:fragment>
                    <ui:fragment id="FragCarnet" rendered="#{becasBean.showCarn == true and becasBean.showFich == false and becasBean.showEmpr==false}">                    
                        <h:form class="form-horizontal">
                            <fieldset>
                                <div class="col-md-12 col-xs-12">  
                                   <div class="panel panel-primary">
                                       <div class="panel-heading">Nueva solicitud</div>
                                       <div class="panel-body">
                                           <fieldset>                                
                                                   <h:outputLabel  for="carnet" value="Ingrese el carnet del alumno: "/>
                                                   <div class="input-group col-xs-3">                                                    
                                                       <h:message for="carnet" errorClass="field-error" />
                                                       <h:inputText id="carnet" value="#{becasBean.carnet}" class="form-control  input-lg" required="true" requiredMessage="Debe Registrar El carnet"></h:inputText>
                                                       <span class="input-group-addon">
                                                           <h:commandLink id="btonCarn" class="btn btn-default">
                                                                   <p:ajax listener="#{becasBean.consW()}" process="@form" update="@form :container" global="true"/>
                                                                   <i class="fa fa-search"/>
                                                           </h:commandLink>
                                                       </span>

                                                   </div>                                                                            
                                           </fieldset>                               
                                       </div>
                                     </div>   
                                   </div>
                            </fieldset>
                          </h:form>
                    </ui:fragment>
                    <ui:fragment id="FragFicha" rendered="#{(becasBean.showFich  == true and becasBean.showEmpr==false) or becasBean.guardar==false}">                    
                        <h:form class="form-horizontal">
                            <fieldset>
                                <div class="col-md-12">  
                                    
                                            <div class="panel panel-default  panel--styled">
                                                <div class="panel-body">
                                                        <div class="col-md-12 panelTop">	
                                                                <div class="col-md-4">	
                                                                        <img class="img-responsive media-object img-circle profile-img" src="http://placehold.it/350x350" alt=""/>
                                                                </div>
                                                                <div class="col-md-8">	
                                                                     <h2 class="media-heading"> #{becasBean.objeSoli.nombAlum}</h2>
                                                                     <c:if test="#{!becasBean.guardar}">
                                                                         <h3 class="media-heading">Estado:</h3>
                                                                         <h:panelGroup class="label label-success" rendered="#{becasBean.objeBeca.codiTipoEsta.codiTipoEsta == 1}">
                                                                            <i class="fa fa-unlock"/> Activo</h:panelGroup>
                                                                            <h:panelGroup class="label label-info" rendered="#{becasBean.objeBeca.codiTipoEsta.codiTipoEsta == 3}">
                                                                            <i class="fa fa-unlock"/> Historial</h:panelGroup>
                                                                            <h:panelGroup class="label label-danger" rendered="#{becasBean.objeBeca.codiTipoEsta.codiTipoEsta== 2}">
                                                                            <i class="fa fa-unlock"/> Inactivo</h:panelGroup>
                                                                            <h:panelGroup class="label label-warning" rendered="#{becasBean.objeBeca.codiTipoEsta.codiTipoEsta ==4}">
                                                                            <i/> Evaluando
                                                                        </h:panelGroup>
                                                                     </c:if>
                                                                    <div class="job">Carnet: #{becasBean.objeSoli.carnAlum}</div>
                                                                    <div class="job">Grado: #{becasBean.objeSoli.codiGrad.nombGrad}</div>                                                            
                                                                    <div class="job">Especialidad: #{becasBean.objeSoli.espeAlum}</div>
                                                                    <div class="job">Grupo: #{becasBean.objeSoli.grupAlum}</div>
                                                                    <div class="job">Sección academica:   #{becasBean.objeSoli.seccAcad}</div>
                                                                    <div class="job">Seccion tecnica :  #{becasBean.objeSoli.seccTecn}</div>
                                                                    <h5>Matricula: <span class="itemPrice">$#{becasBean.objeSoli.codiGrad.matrGrad}</span></h5>
                                                                    <h5>Mensualidad: <span class="itemPrice">$#{becasBean.objeSoli.codiGrad.mensGrad}</span></h5>                                                     
                                                                </div>
                                                        </div>						
                                                        <div class="col-md-12 panelBottom">
                                                            
                                                            
                                                             <c:if test="#{becasBean.objeBeca.codiTipoEsta.codiTipoEsta == 2 or becasBean.objeBeca.codiTipoEsta.codiTipoEsta == 4}">
                                                                <h:commandLink id="btonActi" class="btn btn-info" rendered="#{!becaSoliBean.detalle}">
                                                                    <p:ajax listener="#{becaSoliBean.reActi()}" process="@form" update="@form :ContRegi" oncomplete="INIT_OBJE();" />
                                                                    <i class="fa fa-edit"/> Activar
                                                                </h:commandLink>
                                                             </c:if>
                                                             <c:if test="#{becasBean.objeBeca.codiTipoEsta.codiTipoEsta != 2 or becasBean.objeBeca.codiTipoEsta.codiTipoEsta != 4}">
                                                                <h:commandLink id="btondesa" class="btn btn-primary" rendered="#{!becaSoliBean.guardar}">
                                                                    <p:ajax listener="#{becaSoliBean.desa()}" process="@form" update="@form :ContRegi" oncomplete="INIT_OBJE();" />
                                                                    <i class="fa fa-edit"/> Desactivar Beca
                                                                </h:commandLink>
                                                                

                                                             </c:if>
                                                            
                                                            <c:if test="#{becasBean.guardar}">
                                                                <h:commandLink id="btonCarn" class="btn btn-lg btn-add-to-cart">
                                                                           <p:ajax listener="#{becasBean.toogEmpr()}" process="@form"  update="@form :container" global="true"/>
                                                                           Agregar nueva solicitud
                                                                           <i class="fa fa-plus"/>
                                                                 </h:commandLink>
                                                            </c:if>
                                                                
                                                                <div class="col-md-4 text-left">								
                                                                </div>
                                                        </div>
                                                </div>
                                        </div>
                                </div>
                            </fieldset>

                         </h:form>
                        
                        <c:if test="#{!becasBean.guardar}">
                            <div class="col-md-12 col-xs-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Tipos de beca que poseé este alumno</div>
                                    <div class="panel-body">
                                        <h:panelGroup id="ContDetalle">
                                            <div id="toolTablDetalle">
                                                <h:form>
                                                    
                                                    
                                                    
                                                </h:form>
                                            </div>
                                            <h:dataTable pt:data-id="TablDetalle" id="TablDetalle" value="#{becasBean.listDetaBeca}"
                                                         var="fila" class="boottable" pt:data-toolbar="#toolTablDetalle"
                                                         styleClass="table-hover table-bordered table-condensed table-striped table-responsive"
                                                         pt:data-show-refresh="false" pt:data-show-toggle="false" pt:data-show-columns="false" 
                                                         pt:data-search="true" pt:data-pagination="true" pt:data-page-list="[5, 10, 20, 50]"
                                                         pt:data-click-to-select="true"  pt:data-select-item-name="radio"
                                                         pt:data-single-select="true">                                
                                                <h:column pt:data-field="state" pt:data-checkbox="true">
                                                </h:column>
                                                <h:column pt:data-align="right" pt:data-sortable="true" pt:data-field="idTipoBeca">
                                                    <f:facet name="header">Código</f:facet>
                                                    <h:outputText value="#{fila.codiDetaBeca}"/>
                                                </h:column>
                                                <h:column pt:data-sortable="true" pt:data-field="nombTipoBeca">
                                                    <f:facet name="header">Becado</f:facet>
                                                    <h:outputText value="#{fila.codiBeca.codiSoliBeca.nombAlum}"/>   
                                                </h:column>
                                                <h:column pt:data-sortable="true">
                                                    <f:facet name="header">Tipo Beca</f:facet>
                                                    <h:outputText value="#{fila.codiTipoBeca.nombTipoBeca}"/>
                                                </h:column>
                                                <h:column pt:data-sortable="true">
                                                    <f:facet name="header">Meses</f:facet>
                                                    <h:outputText value="#{fila.cantMese}"/>
                                                </h:column>
                                                <h:column pt:data-sortable="true">
                                                    <f:facet name="header">Estado</f:facet> 
                                                    <h:panelGroup class="label label-success" rendered="#{fila.estaDetaBeca eq '1'}">
                                                   <i class="fa fa-unlock"/> Activo</h:panelGroup>
                                                    <h:panelGroup class="label label-danger" rendered="#{fila.estaDetaBeca ne '1'}">
                                                   <i class="fa fa-lock"/> Inactivo</h:panelGroup>
                                                </h:column>
                                            </h:dataTable>
                                        </h:panelGroup>
                                    </div>
                                </div>
                            </div>


                            <div class="col-md-12 col-xs-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Documentos que poseé este alumno</div>
                                    <div class="panel-body">
                                        <h:panelGroup id="ContDocu">
                                            <div id="toolTablDocu">
                                                <h:form id="FormDocus" class="form-horizontal" enctype="multipart/form-data">
                                                    <!--Form exclusivo para los remotos-->

                                                </h:form>
                                            </div>
                                            <h:dataTable pt:data-id="TablDocu" id="TablDocu" value="#{becasBean.listDocu}"
                                                         var="fila" class="boottable" pt:data-toolbar="#toolTablDocu"
                                                         styleClass="table-hover table-bordered table-condensed table-striped table-responsive"
                                                         pt:data-show-refresh="false" pt:data-show-toggle="false" pt:data-show-columns="false" 
                                                         pt:data-search="true" pt:data-pagination="true" pt:data-page-list="[5, 10, 20, 50]"
                                                         pt:data-click-to-select="true"  pt:data-select-item-name="radio"
                                                         pt:data-single-select="true">                                
                                                <h:column pt:data-field="state" pt:data-checkbox="true">
                                                </h:column>
                                                <h:column pt:data-align="right" pt:data-sortable="true" pt:data-field="idDocu">
                                                    <f:facet name="header">Código</f:facet>
                                                    <h:outputText value="#{fila.codiDocu}"/>
                                                </h:column>
                                                <h:column pt:data-sortable="true">
                                                    <f:facet name="header">Nombre</f:facet>
                                                    <h:outputText value="#{fila.codiSoliBeca.nombAlum}"/>
                                                </h:column>
                                                <h:column pt:data-sortable="true"  pt:data-field="tipoDocu">
                                                    <f:facet name="header">Tipo documento</f:facet>
                                                    <h:outputText value="#{fila.codiTipoDocu.nombTipoDocu}"/>
                                                </h:column>
                                                <h:column pt:data-sortable="true" pt:data-field="fechDocu">
                                                    <f:facet name="header">Fecha </f:facet>
                                                     <h:outputText value="#{fila.fechDocu}">
                                                       <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-6"/>
                                                    </h:outputText>
                                                </h:column>

                                                <h:column pt:data-sortable="true" pt:data-field="ruta">
                                                    <f:facet name="header">Ruta </f:facet>
                                                    <h:outputText value="#{fila.rutaDocu}">
                                                       <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-6"/>
                                                    </h:outputText>
                                                </h:column>
                                            </h:dataTable>
                                        </h:panelGroup>
                                    </div>
                                </div>
                            </div>
                        
                        </c:if>
                    </ui:fragment>
                     <ui:fragment id="FragSeleEmpr" rendered="#{becasBean.showEmpr}">
                         <h:form class="form-horizontal">
                            <fieldset>
                                <div class="col-md-12 col-xs-12">  
                                   <div class="panel panel-primary">
                                       <div class="panel-heading">Nueva solicitud</div>
                                       <div class="panel-body">
                                           <fieldset>                                
                                                   <h:outputLabel  for="empresa" value="Seleccione la empresa que patrocinara al estudiante "/>
                                                   <div class="input-group col-xs-6">                                                    
                                                       <h:message for="empresa" errorClass="field-error" />                                                    
                                                       
                                                       <h:selectOneMenu id="empresa" value="#{becasBean.objeSoli.codiEmpr}" class="form-control input-lg" pt:data-live-search="true">                                                       
                                                        <f:selectItems value="#{empresaBean.listEmpr}" var="lst" itemLabel="#{lst.nombEmpr}" itemValue="#{lst}"/>
                                                        <f:converter converterId="PooConv"/>
                                                         </h:selectOneMenu>
                                                       <c:if test="#{becasBean.guardar}">
                                                           <span class="input-group-addon">
                                                                <h:commandLink id="btonCarn" class="btn btn-default">
                                                                        <p:ajax listener="#{becasBean.guar()}" process="@form" update="@form :container" global="true"/>
                                                                        <i class="fa fa-plus"/>
                                                                </h:commandLink>
                                                            </span>
                                                       
                                                       </c:if>
                                                       

                                                   </div>                                                                            
                                           </fieldset>                               
                                       </div>
                                     </div>   
                                   </div>
                            </fieldset>
                          </h:form>
                     </ui:fragment>
                </h:panelGroup>
            </div>
        </ui:define>
    </ui:composition>
</html>
